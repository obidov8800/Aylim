{% extends "admin/base.html" %}
{% load i18n %}

{% block content %}
<div id="content-main">
    <h1>Ma'lumotlar bazasini tiklash</h1>
    <p class="warning">
        <b>DIQQAT:</b> Bu jarayon mavjud ma'lumotlar bazasini to'liq o'chirib yuboradi va tanlangan zaxira nusxasi bilan almashtiradi.
        Ma'lumotlaringizni yo'qotmaslik uchun ehtiyot bo'ling!
    </p>

    <form action="{% url 'restore_db' %}" method="post">
        {% csrf_token %}
        <div class="form-row">
            <label for="id_backup_file">Zaxira fayli:</label>
            <select name="backup_file" id="id_backup_file">
                {% for backup in backups %}
                    <option value="{{ backup }}">{{ backup }}</option>
                {% empty %}
                    <option value="">Zaxira fayllari topilmadi.</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="button" onclick="return confirm('Haqiqatan ham ma\'lumotlar bazasini tiklamoqchimisiz? Bu mavjud ma\'lumotlarni o\'chirib yuboradi.');">
            Tiklashni boshlash
        </button>
    </form>

    <div style="margin-top: 20px;">
        {% if messages %}
            <ul class="messagelist">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
</div>
{% endblock %}